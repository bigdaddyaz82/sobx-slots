<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SOBEX Slot Game</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #0b2e0b;
    color: #c1e1c1;
    margin: 0; padding: 0;
  }
  header {
    background: #1c4d1c;
    padding: 1em;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    letter-spacing: 1.2px;
    border-bottom: 3px solid #2ba02b;
  }
  main {
    max-width: 600px;
    margin: auto;
    padding: 1em;
  }
  .wallet-section {
    text-align: center;
    margin-bottom: 1em;
  }
  button {
    background-color: #2ba02b;
    border: none;
    padding: 0.7em 1.4em;
    margin: 0 0.3em;
    border-radius: 6px;
    color: #e6f5e6;
    font-size: 1.1em;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover:not(:disabled) {
    background-color: #3dc63d;
  }
  button:disabled {
    background-color: #0b440b;
    cursor: not-allowed;
  }
  .balance, .wallet-address {
    margin: 0.4em 0;
    font-weight: 600;
    font-size: 1.1em;
  }
  .slot-machine {
    display: flex;
    justify-content: center;
    margin: 1em 0;
  }
  .slot {
    width: 90px;
    height: 90px;
    margin: 0 6px;
    border: 3px solid #2ba02b;
    border-radius: 10px;
    font-size: 4em;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #154515;
    user-select: none;
  }
  .controls {
    text-align: center;
    margin-top: 1em;
  }
  .bet-buttons {
    margin-bottom: 1em;
  }
  .bet-btn {
    min-width: 80px;
  }
  .toggle-double {
    margin: 1em 0;
    font-size: 1.1em;
  }
  .message {
    text-align: center;
    margin-top: 1em;
    min-height: 1.4em;
    font-weight: 600;
  }
  footer {
    margin-top: 3em;
    text-align: center;
    font-size: 0.9em;
    color: #5a875a;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.7.8/dist/umd/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
</head>
<body>

<header>
  SOBEX Slot Game
</header>

<main>
  <div class="wallet-section">
    <button id="connectBtn">Connect Wallet</button>
    <button id="disconnectBtn" style="display:none;">Disconnect</button>
    <div class="wallet-address" id="walletAddress">Wallet: Not connected</div>
    <div class="balance">Balance: <span id="balance">0</span> SOBEX</div>
    <button id="dailyBonusBtn" disabled>Claim Daily Bonus</button>
    <div id="dailyBonusMessage" style="margin-top:0.5em; font-size:0.9em; color:#9fd79f;"></div>
  </div>

  <div class="slot-machine" id="slot-machine">
    <div class="slot" id="slot1">?</div>
    <div class="slot" id="slot2">?</div>
    <div class="slot" id="slot3">?</div>
  </div>

  <div class="controls">
    <div class="bet-buttons">
      <button class="bet-btn" data-bet="1">Bet 1</button>
      <button class="bet-btn" data-bet="5">Bet 5</button>
      <button class="bet-btn" data-bet="10">Bet 10</button>
    </div>

    <button id="spinBtn" disabled>Spin</button>

    <div class="toggle-double">
      <label>
        <input type="checkbox" id="doubleToggle" />
        Times 2 Weekend Winnings
      </label>
    </div>
  </div>

  <div class="message" id="message"></div>
</main>

<footer>
  Reynolds Painting & Resurfacing LLC - Painting Perfection One Surface at a Time.
</footer>

<script>
  const symbols = ["🍎", "🍌", "🍇", "🍒", "🍉", "🥝", "🍍", "🥭", "🍑", "🍓", "🥥", "🍋", "🍊"];
  const SOBEX_TOKEN_ADDRESS = "0x99c76e2311ebe008c59226b826c2b96e39e9428b";
  const SOBEX_TOKEN_ABI = [
    { "constant":true, "inputs":[{"name":"_owner","type":"address"}], "name":"balanceOf", "outputs":[{"name":"balance","type":"uint256"}], "type":"function" },
    { "constant":false, "inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}], "name":"transfer", "outputs":[{"name":"","type":"bool"}], "type":"function" },
    { "constant":true, "inputs":[], "name":"decimals", "outputs":[{"name":"","type":"uint8"}], "type":"function" }
  ];

  let web3;
  let provider;
  let accounts = [];
  let sobexContract;
  let userBalance = 0;
  let decimals = 18;

  let currentBet = 1;

  const connectBtn = document.getElementById("connectBtn");
  const disconnectBtn = document.getElementById("disconnectBtn");
  const walletAddressEl = document.getElementById("walletAddress");
  const balanceEl = document.getElementById("balance");
  const spinBtn = document.getElementById("spinBtn");
  const messageEl = document.getElementById("message");
  const doubleToggle = document.getElementById("doubleToggle");
  const betButtons = document.querySelectorAll(".bet-btn");
  const slotEls = [document.getElementById("slot1"), document.getElementById("slot2"), document.getElementById("slot3")];
  const dailyBonusBtn = document.getElementById("dailyBonusBtn");
  const dailyBonusMessage = document.getElementById("dailyBonusMessage");

  function fromWei(amount, decimals) {
    return amount / (10 ** decimals);
  }
  function toWei(amount, decimals) {
    return Math.floor(amount * (10 ** decimals));
  }

  connectBtn.onclick = connectWallet;
  disconnectBtn.onclick = disconnectWallet;
  spinBtn.onclick = spin;
  doubleToggle.onchange = () => {
    messageEl.textContent = doubleToggle.checked ? "Times 2 enabled for weekend" : "";
  };
  dailyBonusBtn.onclick = claimDailyBonus;

  betButtons.forEach(btn => {
    btn.onclick = () => {
      currentBet = parseInt(btn.dataset.bet);
      betButtons.forEach(b => b.style.backgroundColor = "#2ba02b");
      btn.style.backgroundColor = "#3dc63d";
      messageEl.textContent = `Bet set to ${currentBet} SOBEX`;
      checkSpinAvailability();
    };
  });

  function resetSlots() {
    slotEls.forEach(slot => (slot.textContent = "?"));
  }

  async function connectWallet() {
    try {
      provider = new WalletConnectProvider.default({
        rpc: {
          8453: "https://mainnet.base.org"
        }
      });

      await provider.enable();
      web3 = new Web3(provider);
      accounts = await web3.eth.getAccounts();

      if (accounts.length === 0) throw new Error("No accounts found");

      sobexContract = new web3.eth.Contract(SOBEX_TOKEN_ABI, SOBEX_TOKEN_ADDRESS);
      decimals = await sobexContract.methods.decimals().call();

      walletAddressEl.textContent = "Wallet: " + accounts[0];
      connectBtn.style.display = "none";
      disconnectBtn.style.display = "inline-block";

      await updateUserBalance();
      checkSpinAvailability();
      checkDailyBonus();

      provider.on("disconnect", () => {
        disconnectWallet();
      });

      messageEl.textContent = "Wallet connected. Ready to play.";
    } catch (err) {
      messageEl.textContent = "Error connecting wallet: " + err.message;
    }
  }

  async function disconnectWallet() {
    if (provider) {
      await provider.disconnect();
      provider = null;
    }
    web3 = null;
    accounts = [];
    sobexContract = null;
    userBalance = 0;
    decimals = 18;
    walletAddressEl.textContent = "Wallet: Not connected";
    balanceEl.textContent = "0";
    connectBtn.style.display = "inline-block";
    disconnectBtn.style.display = "none";
    spinBtn.disabled = true;
    dailyBonusBtn.disabled = true;
    dailyBonusMessage.textContent = "";
    messageEl.textContent = "Wallet disconnected.";
    resetSlots();
  }

  async function updateUserBalance() {
    if (!sobexContract || !accounts.length) return;
    try {
      let bal = await sobexContract.methods.balanceOf(accounts[0]).call();
      userBalance = fromWei(bal, decimals);
      balanceEl.textContent = userBalance.toFixed(4);
    } catch (err) {
      messageEl.textContent = "Error fetching balance: " + err.message userBalance = 0;

      <footer style="margin-top: 3em; text-align: center; font-size: 0.9em; color: #5a875a; user-select:none;">
  Created by <strong>BigDaddyAZ82</strong><br />
  Sponsored by <strong>Reynolds Painting & Resurfacing LLC™</strong><br />
  <em>Painting perfection won't surface at a fucking time™</em>
</footer>
