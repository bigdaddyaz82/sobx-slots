<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sobex Slot Machine</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #121212;
    color: white;
    margin: 0;
    padding: 0;
  }
  h1 {
    margin-top: 20px;
  }
  #wallet-section {
    margin: 20px 0;
  }
  #slot-machine {
    display: flex;
    justify-content: center;
    margin: 20px 0;
  }
  .slot-reel {
    font-size: 80px;
    width: 100px;
    height: 100px;
    border: 3px solid #fff;
    margin: 0 10px;
    border-radius: 10px;
    background: #222;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #bet-buttons, #multiplier-button {
    margin: 15px 0;
  }
  button {
    font-size: 18px;
    margin: 0 10px;
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
  }
  #spin-button {
    background: #d32f2f;
    color: white;
    font-weight: bold;
    margin: 20px 0;
    width: 200px;
  }
  footer {
    background: #222;
    color: #ccc;
    padding: 15px 10px;
    font-size: 14px;
  }
  footer .motto {
    font-style: italic;
    margin-top: 5px;
  }
  #daily-reward-section {
    margin: 20px 0;
  }
  #claim-reward {
    background: #007bff;
    color: white;
    font-weight: bold;
    padding: 12px 25px;
    border-radius: 8px;
  }
  #reward-message {
    margin-top: 10px;
    font-size: 16px;
    min-height: 24px;
  }
</style>
</head>
<body>

<h1>Sobex Slot Machine</h1>

<div id="wallet-section">
  <button id="connect-wallet">Connect Wallet</button>
  <div id="wallet-address" style="margin-top:10px;"></div>
</div>

<div id="daily-reward-section">
  <button id="claim-reward">Claim Daily Reward</button>
  <div id="reward-message"></div>
</div>

<div id="slot-machine">
  <div class="slot-reel" id="reel1">üçé</div>
  <div class="slot-reel" id="reel2">üçé</div>
  <div class="slot-reel" id="reel3">üçé</div>
</div>

<div id="bet-buttons">
  <button data-bet="1">Bet 1</button>
  <button data-bet="5">Bet 5</button>
  <button data-bet="10">Bet 10</button>
</div>

<div id="multiplier-button">
  <button id="times-two">Times 2 Multiplier</button>
</div>

<button id="spin-button">SPIN</button>

<footer>
  Created by BigDaddyAZ82‚Ñ¢<br />
  Sponsored by Reynolds Painting and Resurfacing LLC<br />
  <span class="motto">Painting perfection won't surface at a time‚Ñ¢</span>
</footer>

<script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
<script>
  // Symbols with 13 icons including green parrot ü¶ú replacing blue bird
  const symbols = ['üçé', 'üçí', 'üíé', 'üçã', 'üîî', '7Ô∏è‚É£', 'üçÄ', 'ü¶ú', 'üçâ', 'üçá', '‚≠ê', 'üçä', 'üçå'];

  let web3;
  let userAccount = null;
  let betAmount = 1;
  let multiplier = 1;

  const connectWalletBtn = document.getElementById('connect-wallet');
  const walletAddressDiv = document.getElementById('wallet-address');
  const spinButton = document.getElementById('spin-button');
  const betButtons = document.querySelectorAll('#bet-buttons button');
  const timesTwoBtn = document.getElementById('times-two');

  // Daily reward elements
  const claimRewardBtn = document.getElementById('claim-reward');
  const rewardMessageDiv = document.getElementById('reward-message');

  // Wallet connect logic
  async function connectWallet() {
    if (window.ethereum) {
      try {
        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        userAccount = accounts[0];
        walletAddressDiv.textContent = `Connected: ${userAccount}`;
        connectWalletBtn.style.display = 'none';
      } catch (err) {
        alert('Wallet connection rejected.');
      }
    } else {
      alert('Please install MetaMask or another Ethereum wallet!');
    }
  }

  connectWalletBtn.addEventListener('click', connectWallet);

  // Bet buttons event
  betButtons.forEach(button => {
    button.addEventListener('click', () => {
      betAmount = Number(button.getAttribute('data-bet'));
      betButtons.forEach(btn => btn.style.backgroundColor = '');
      button.style.backgroundColor = '#4caf50';
    });
  });

  // Default select bet 1 on page load
  betButtons[0].style.backgroundColor = '#4caf50';

  // Times two multiplier toggle
  timesTwoBtn.addEventListener('click', () => {
    if (multiplier === 1) {
      multiplier = 2;
      timesTwoBtn.style.backgroundColor = '#4caf50';
    } else {
      multiplier = 1;
      timesTwoBtn.style.backgroundColor = '';
    }
  });

  // Spin reels logic
  function spinReels() {
    const reel1 = document.getElementById('reel1');
    const reel2 = document.getElementById('reel2');
    const reel3 = document.getElementById('reel3');

    // Spin effect for 1 second
    let count = 0;
    const spinInterval = setInterval(() => {
      reel1.textContent = symbols[Math.floor(Math.random() * symbols.length)];
      reel2.textContent = symbols[Math.floor(Math.random() * symbols.length)];
      reel3.textContent = symbols[Math.floor(Math.random() * symbols.length)];

      count++;
      if (count > 20) {
        clearInterval(spinInterval);
        checkWin(reel1.textContent, reel2.textContent, reel3.textContent);
      }
    }, 50);
  }

  // Simple win check example
  function checkWin(r1, r2, r3) {
    if (r1 === r2 && r2 === r3) {
      alert(`Jackpot! You won ${betAmount * multiplier * 10} SOBEX!`);
      // Here you would call smart contract mint or reward logic
    } else if (r1 === r2 || r2 === r3 || r1 === r3) {
      alert(`Nice! You won ${betAmount * multiplier * 2} SOBEX!`);
    } else {
      alert('No win, try again!');
    }
  }

  spinButton.addEventListener('click', () => {
    if (!userAccount) {
      alert('Please connect your wallet first!');
      return;
    }
    spinReels();
  });

  // Daily reward logic
  claimRewardBtn.addEventListener('click', () => {
    if (!userAccount) {
      rewardMessageDiv.textContent = 'Connect your wallet to claim daily reward.';
      return;
    }
    const now = Date.now();
    const lastClaim = localStorage.getItem(`lastClaim_${userAccount}`);
    if (lastClaim && now - lastClaim < 24 * 60 * 60 * 1000) {
      const nextClaim = new Date(parseInt(lastClaim) + 24 * 60 * 60 * 1000);
      rewardMessageDiv.textContent = `Daily reward already claimed. Come back at ${nextClaim.toLocaleTimeString()}.`;
      return;
    }
    // Simulate daily reward mint amount 20-25 SOBEX
    const rewardAmount = 20 + Math.floor(Math.random() * 6);
    rewardMessageDiv.textContent = `Congrats! You claimed ${rewardAmount} SOBEX daily reward.`;
    localStorage.setItem(`lastClaim_${userAccount}`, now.toString());
    // TODO: Replace above with smart contract call to mint/send tokens
  });
</script>
</body>
</html>
