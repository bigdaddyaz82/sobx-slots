<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sobex Slots</title>
<style>
  body { font-family: Arial, sans-serif; background: #121212; color: #eee; text-align: center; padding: 20px; }
  h1 { margin-bottom: 10px; }
  #slots { display: flex; justify-content: center; margin: 20px 0; }
  .slot-wheel { width: 80px; height: 80px; margin: 0 10px; font-size: 48px; line-height: 80px; border: 3px solid #f39c12; border-radius: 10px; background: #222; }
  #bet-buttons button { margin: 0 5px; padding: 10px 20px; font-size: 18px; cursor: pointer; }
  #spin-button { margin-top: 20px; padding: 12px 30px; font-size: 24px; background: #f39c12; border: none; border-radius: 10px; cursor: pointer; }
  #result { margin-top: 20px; font-size: 20px; min-height: 40px; }
</style>
</head>
<body>

<h1>Sobex Slots</h1>

<div id="slots">
  <div class="slot-wheel" id="wheel1">?</div>
  <div class="slot-wheel" id="wheel2">?</div>
  <div class="slot-wheel" id="wheel3">?</div>
</div>

<div id="bet-buttons">
  Bet: 
  <button data-bet="1">1 Sobex</button>
  <button data-bet="5">5 Sobex</button>
  <button data-bet="10">10 Sobex</button>
</div>

<button id="spin-button" disabled>Spin</button>

<div id="result"></div>

<script>
  // Available slot symbols
  const symbols = ['7', 'ðŸ’', '8', 'â­', 'ðŸ‹', '8-ball'];
  let selectedBet = 1;
  let spinning = false;

  // Enable bet buttons & spin button
  const betButtons = document.querySelectorAll('#bet-buttons button');
  const spinButton = document.getElementById('spin-button');
  const resultDiv = document.getElementById('result');
  const wheels = [document.getElementById('wheel1'), document.getElementById('wheel2'), document.getElementById('wheel3')];

  // Select bet function
  betButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      selectedBet = parseInt(btn.getAttribute('data-bet'));
      betButtons.forEach(b => b.style.background = '');
      btn.style.background = '#f39c12';
      spinButton.disabled = false;
      resultDiv.textContent = '';
    });
  });

  // Highlight default bet button
  betButtons[0].style.background = '#f39c12';
  spinButton.disabled = false;

  // Simulate backend slot spin function
  function backendSpin(bet) {
    // This should call your real backend API or logic
    // For demo, randomly generate 3 symbols and payout logic

    function randomSymbol() {
      return symbols[Math.floor(Math.random() * symbols.length)];
    }

    const wheelsResult = [randomSymbol(), randomSymbol(), randomSymbol()];

    // Simple payout rules
    let payout = 0;
    if (wheelsResult[0] === wheelsResult[1] && wheelsResult[1] === wheelsResult[2]) {
      // Jackpot: 3 in a row
      payout = bet * 20;
    } else if (wheelsResult.filter(s => s === '8-ball').length >= 2) {
      payout = bet * 5;
    } else if (wheelsResult.filter(s => s === '7').length >= 2) {
      payout = bet * 3;
    } else if (wheelsResult.includes('â­')) {
      payout = bet * 1.5;
    }

    return { wheelsResult, payout };
  }

  // Spin animation
  function spinAnimation(duration = 2000) {
    return new Promise(resolve => {
      const start = Date.now();
      const interval = setInterval(() => {
        wheels.forEach(wheel => {
          wheel.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        });
        if (Date.now() - start >= duration) {
          clearInterval(interval);
          resolve();
        }
      }, 100);
    });
  }

  // Spin button handler
  spinButton.addEventListener('click', async () => {
    if (spinning) return;
    spinning = true;
    resultDiv.textContent = 'Spinning... good luck!';
    spinButton.disabled = true;

    // Play spin animation
    await spinAnimation();

    // Call backend (replace with real backend call)
    const { wheelsResult, payout } = backendSpin(selectedBet);

    // Show final result
    wheels.forEach((wheel, i) => wheel.textContent = wheelsResult[i]);
    if (payout > 0) {
      resultDiv.textContent = `You won ${payout} Sobex!`;
    } else {
      resultDiv.textContent = 'No luck this time, try again!';
    }

    spinButton.disabled = false;
    spinning = false;
  });
</script>

</body>
</html>
